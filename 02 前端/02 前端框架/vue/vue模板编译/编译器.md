## 编译器核心技术概览

Vue 的模版和 JSX 都属于特定领域的特定语言，它们的实现难度属于中低级别，只要掌握几本的编译技术理论即可以实现这些功能。



## 1.1 模板 DSL 的编译器

### 1.1.1 传统编译器

编译器其实只是一段程序，它用于将 A 语言翻译成 B 语言。

- A 语言：源代码
- B 语言： 目标代码
- 源代码 -> 目标代码：编译

完整的编译一半包含以下几个步骤

- 词法分析
- 语法分析
- 语义分析
- 中间代码生成
- 优化
- 目标代码生成

### 1.1.2 Vue编译器

Vue 的模板作为 DSL，其编译流程会有所不同。对 Vue 来说，源代码就是组件模板，目标代码就是能在浏览器上运行的 js 代码，或者其他拥有 js 运行时的平台代码

```html
<-- 源代码 !-->
<div>
  <h1 :id="dynamicId">
    Vue Template
  </h1>
</div>
```

```javascript
// 目标代码
function render() {
	return h('div', [
		h('h1', {id: dynamic}, 'Vue Template')
	])
}
```

Vue 的模板编译器首先对模板进行词法分析和语法分析，得到模板 AST。接着，将模板 AST 转换成 JavaScriptAST。最后，根据 JavaScriptAST 生成 JavaScript 代码，即渲染函数代码



















